import os

# --- 로그인 정보 ---
USERNAME = "1"
PASSWORD = "1"

# 섹션 순서 (이전/다음 버튼 등에 사용)
SECTIONS_ORDER_KEYS = ["necessity", "method", "considerations", "side_effects", "precautions"]

# 사이드바 섹션 매핑
SECTIONS_SIDEBAR_MAP = {
    "necessity": {"title": "왜 수술을 해야 하나요?", "idx": 1},
    "method": {"title": "수술은 어떻게 진행되나요?", "idx": 2},
    "considerations": {"title": "알아두어야 할 점", "idx": 3},
    "side_effects": {"title": "합병증", "idx": 4},
    "precautions": {"title": "관리 방법법", "idx": 5},
}


IMAGE_FILE_MAP = {
    # 수술 종류 1: 로봇보조 자궁절제술
    "로봇보조 자궁절제술": {
        "necessity": "images/gynecologic/necessity.jpg", 
        "method": "images/gynecologic/method.jpg",
        "considerations": "images/gynecologic/considerations.jpg",
        "side_effects": "images/gynecologic/side_effects.jpg",
        "precautions": "images/gynecologic/precautions.jpg",
    },
    # 수술 종류 2: 로봇보조 전립선절제술
    "로봇보조 전립선절제술": {
        "necessity": "images/urology/necessity.jpg",
        "method": "images/urology/method.jpg",
        "considerations": "images/urology/considerations.jpg",
        "side_effects": "images/urology/side_effects.jpg",
        "precautions": "images/urology/precautions.jpg",
    },
}

HARDCODED_BASE_EXPLANATIONS = {
"왜 수술을 해야 하나요?": {
    "로봇보조 자궁절제술": 
    
    """
    [왜 수술이 필요한가요?]
    <br>❶ <mark>**암이 생긴 부위를 잘라내고**</mark>, 암세포가 퍼졌을 가능성이 있는 **자궁 주변과 림프절** 등을 함께 제거

    <br>❷ 수술로 떼어낸 조직을 **검사**해서 암이 얼마나 퍼졌는지 정확하게 확인

    <br>❸ 검사 결과는 앞으로의 치료 방향을 정하고, 병이 나을 가능성을 예측하는 데 중요

    <br>❹ 최근에는 떼어낸 조직으로 유전자 검사 등을 해서 환자에게 꼭 맞는 치료법을 찾아 더 좋은 결과를 얻고 있습니다

    <br>❺ 수술 방법은 
    - 배를 여는 수술(개복)
    - 작은 구멍을 뚫는 수술(복강경)
    - <mark>**로봇을 이용한 수술**</mark> 중에서 결정
        """,

    "로봇보조 전립선절제술": """

    **[수술이 왜 필요한가요?]**
    - <mark>**전립선에 생긴 암을 수술로 완전히 제거**</mark>하여 완치하는 것이 목적입니다.
    - 전립선을 제거한 후 정밀 검사를 통해 암의 정확한 상태를 확인하고, 추가 치료가 필요한지 판단합니다.

    **[수술 방법 선택]**
    <br>수술 전 검사 결과와 환자의 건강 상태, 과거 병력을 종합하여 다음 중 하나를 선택합니다.
    - 개복수술(배를 크게 여는 수술)
    - 복강경수술(작은 구멍을 뚫어 하는 수술)
    - <mark>**로봇수술**</mark>
    """
    },

    "수술은 어떻게 진행되나요?": {
        "로봇보조 자궁절제술": """

        - 로봇 수술은 **의사가** 3D 화면을 보며 **로봇 팔을 직접 조종**하여 진행합니다.
        - 배를 크게 열지 않고 작은 구멍 몇 개만 뚫기 때문에 상처가 작고 몸에 부담이 적습니다.

        |<span style="color: #007bff;">**장점**</span>|<span style="color: #dc143c;">**단점**</span>|
        |---|---|
        |상처가 작고 아픔이 덜하며, 회복이 빠릅니다.|건강보험이 적용되지 않아 수술비가 비쌉니다.
        화면을 10배까지 확대해서 볼 수 있고, 로봇 팔이 사람 손보다 더 자유롭게 움직여 정교한 수술이 가능합니다.|수술 준비 시간이 조금 더 걸립니다.
        손 떨림 없이 미세한 작업이 가능해 주변의 혈관이나 신경 손상을 최소화할 수 있습니다.|수술 중 예상치 못한 문제가 생기면 배를 열거나 복강경 수술로 바꿔야 할 수 있습니다.|

        |시점|과정|
        |---|---|
        |**준비**|수술실로 이동해 환자 정보를 다시 한번 확인한 뒤, 전신 마취를 시작합니다.|
        |**수술**|1. 배꼽 주변에 2cm 정도의 작은 구멍을 뚫고 관을 넣습니다.<br>2. 이산화탄소 가스를 넣어 배를 부풀려 수술할 공간을 만듭니다.<br>3. 카메라와 수술 도구가 들어갈 0.5-1cm 크기의 구멍을 아랫배에 2~3개 더 뚫습니다. <br>(구멍 위치와 개수는 달라질 수 있습니다.)<br>4. 떼어낸 자궁 등은 질을 통해 꺼내거나, 잘게 잘라서 꺼냅니다.<br>5. 구멍을 뚫었던 부위를 꿰매고 수술을 마칩니다.|
        |**회복**|마취에서 깨면 회복실로 이동해 상태가 안정될 때까지 지켜본 후, 병실로 돌아옵니다|
        
        |**수술 시간**|**총 소요 시간**|
        |---|---|
        |보통 2시간 이상 걸리지만, 환자의 상태나 유착(장기 등이 달라붙는 현상) 정도에 따라 더 길어질 수 있습니다.|수술 준비부터 회복실을 거쳐 병실로 돌아오기까지는 보통 6시간 이상 걸립니다.|
        """,

        "로봇보조 전립선절제술": """     

        **[로봇수술 장비]**
        <br>로봇수술은 **3가지**로 구성됩니다.
        <br>- **조작 콘솔**: 의사가 앉아서 3D 화면을 보며 **로봇 팔을 원격으로 조작**
        <br>- **환자 카트**: **4개의 로봇 팔**이 달린 본체로, 카메라와 수술 도구를 장착
        <br>- **비전 카트**: 수술팀 전체가 **화면을 보며 함께 수술**할 수 있는 장비

        |<span style="color: #007bff;">**장점**</span>|<span style="color: #dc143c;">**단점**</span>|
        |---|---|
        |<span style="color: #007bff;">**작은 절개창**</span>으로 수술하여 몸에 주는 부담이 적음|보험이 적용되지 않아 수술비가 <span style="color: #dc143c;">**비쌈**</span>
        흉터가 **작고** 통증이 **적어** 회복이 <span style="color: #007bff;">**빠름**</span>|로봇 준비 시간이 <span style="color: #dc143c;">**추가로**</span> 필요
        10배까지 확대되는 3D 화면으로 <span style="color: #007bff;">**정밀한**</span> 수술 가능|손으로 직접 만지는 감각이 <span style="color: #dc143c;">**부족**</span>
        자유롭게 움직이는 로봇 팔로 <span style="color: #007bff;">**세밀한**</span> 봉합 가능|예상치 못한 문제 발생 시 일반 수술로 <span style="color: #dc143c;">**전환**</span>해야 할 수 있음
        신경 보존과 방광-요도 연결이 더 <span style="color: #007bff;">**정확함**</span>|응급 수술에는 <span style="color: #dc143c;">**부적합**</span>|

        |시점|과정|
        |---|---|
        |**수술 전**|1. 병실에서 수술 대기실로 이동<br>2. 환자 정보와 수술 내용을 확인<br>3. 수술실로 이동 후 다시 한 번 확인<br>4. 전신마취 후 수술 시작|
        |**수술 중**|1. **절개**: 배에 **5-12mm 크기**의 작은 구멍을 냄<br>2. **공간 확보**: 관을 넣어 배 안에 **이산화탄소**를 주입하여 배를 부풀림 (수술 공간 확보)<br>3. **카메라 삽입**: 관을 통해 카메라를 넣어 배 안을 관찰<br>4. **수술도구 삽입**: 구멍으로 수술도구를 장착한 로봇팔을 넣음<br>5. **조직 제거**: 전립선, 정낭, 정관 일부를 완전히 제거<br>6. **봉합**: 방광과 요도를 다시 연결<br>※ 필요 시, 골반 림프절도 함께 제거할 수 있고, 환자 상태에 따라 발기 기능을 담당하는 신경을 보존하는 수술을 할 수도 있습니다.<br>이는 수술 중 상태를 보고 결정하므로 계획과 달라질 수 있습니다.|
        |**수술 후**|1. 마취에서 깨어난 후 회복실에서 상태 관찰<br>2. 안정되면 병실로 복귀|

        """
    },
    "알아두어야 할 점": {
        "로봇보조 자궁절제술": """

        <br>**[알아두어야 할 점]**
        ❶ 수술 전 검사에서 종양이 크거나 장기가 심하게 달라붙어 있을 것으로 예상되면, **처음부터 배를 여는 수술**을 할 수도 있습니다.
        ❷ 로봇 수술 중에 피가 많이 나거나 주변 장기가 다칠 위험이 크다고 판단되면, 안전을 위해 배를 여는 수술로 바꿀 수 있습니다.
        ❸ 수술 중 암이 생각보다 심각하다고 판단되면, **계획에 없던 림프절이나 난소를 함께 제거**할 수도 있습니다.
        ❹ 암이 다른 장기(소화기관, 비뇨기관 등)로 퍼졌거나 수술 중 손상이 생기면, **다른 과 의사와 함께 수술**하며 수술 범위가 커질 수 있습니다.
        	<br>- 이런 경우, **보호자에게 설명하고 동의를 얻은 후 추가 수술**을 진행합니다.
        	<br>- 하지만 상황이 위급하여 동의를 구할 시간이 없으면, 먼저 수술을 진행하고 나서 환자나 보호자에게 설명해 드립니다.

        """,

        "로봇보조 전립선절제술": """

        **[배를 여는 수술로 바꾸는 경우]**
        <br>다음과 같은 상황에서는 **배를 크게 열어서 수술하는 방법**으로 바꿀 수 있습니다:
        - 장이 심하게 달라붙어 있는 경우
        - 수술 부위에 문제가 있는 경우
        - 수술 중 부작용이 생겨 교정이 필요한 경우
        - 로봇 장비의 한계로 더 이상 로봇 수술이 어려운 경우

        **[소변줄 관리]**
        <br>수술 후 소변을 빼내기 위한 소변줄이 방광에 들어가 있습니다.
        <br>보통 수술 후 5-7일째 방광과 요도 연결 부위에서 <mark>**소변이 새지 않는지 확인한 후 소변줄을 제거**</mark>합니다.
        <br>소변줄을 뺀 후에는 본인 의지와 상관없이 소변이 어느 정도 새는 경우가 대부분 있습니다. 따라서 <mark>**임시로 기저귀를 준비**</mark>하시는 것이 좋습니다.

        **[추가 치료]**
        <br>최종 조직검사 결과나 암이 재발하는 경우 방사선 치료나 호르몬 치료 등을 추가로 받을 수 있습니다.
        <br>퇴원 후에는 정기적으로 **전립선암 수치 혈액검사**와 기타 검사를 통해 암이 재발했는지 지켜봅니다. 이를 통해 추가 치료가 필요한지 결정합니다.

        """
    },
    "합병증": {
        "로봇보조 자궁절제술": """

        |**합병증**|**내용**|
        |---|---|
        |**소변 문제 (배뇨장애)**|수술 후 방광 기능이 떨어져 소변보기가 어려울 수 있습니다. <br>약물 치료를 하며, 드물게는 오랫동안 지속될 수 있습니다.|
        |**심장/폐 기능 장애**|수술 시 배를 부풀리는 가스 때문에 드물게 발생할 수 있습니다. <br>어깨가 아플 수 있지만 보통 하루 안에 좋아집니다.|
        |**폐렴/무기폐**|전신 마취로 인해 폐의 문제가 발생할 수 있습니다.|
        |**림프 부종**|림프절을 제거하면 팔이나 다리가 붓는 증상이 나타날 수 있습니다.|
        |**주변 장기 손상**|수술 기구를 뱃속에 넣을 때나, 장기가 심하게 달라붙어 있을 때 주변의 위, 장, 혈관, 방광 등이 다칠 수 있습니다. <br>과거에 수술 받은 경험이 있거나 자궁내막증 등이 있으면 위험이 더 커질 수 있습니다.|
        |**피가 나는 증상(출혈)**|수술 중이나 후에 피가 많이 나면 수혈이 필요할 수 있습니다.|
        |**수술 부위 통증**|수술 후 2~5일 정도 아플 수 있으며, 진통제로 조절합니다.|
        |**장이 막히는 증상(장폐색)**|수술 후 장이 잘 움직이지 않아 막힐 수 있습니다. 금식을 하거나 코에 관을 넣어 치료하며, 심하면 재수술이 필요할 수 있습니다.|
        |**상처 감염**|수술 부위에 염증이 생길 수 있습니다. 소독과 항생제로 치료하며, 심하면 입원 기간이 길어지거나 재수술이 필요할 수 있습니다.|
        |**감각이나 운동 기능 저하**|오랜 시간 같은 자세로 수술받기 때문에 신경이 눌려 팔다리에 감각 이상이나 마비가 올 수 있습니다. <br>대부분 시간이 지나면 좋아지지만, 드물게는 영구적인 후유증이 남을 수도 있습니다.|
        |**피떡이 혈관을 막는 증상(혈전 색전증)**|다리나 폐, 뇌, 심장 등의 혈관이 피떡(혈전)으로 막힐 수 있습니다.<br>심하면 생명이 위험할 수 있어, 예방을 위해 약을 쓰거나 압박 스타킹을 착용합니다.|
        |**눈의 압력 상승(안압 상승)**|수술 자세 때문에 안압이 올라갈 수 있습니다. <br>녹내장이 있다면 수술 전에 꼭 알려주세요.|

        """,
        "로봇보조 전립선절제술": """
        <!-- TTS-SKIP-START -->
        
        |**합병증**|**내용**|
        |---|---|
        |**출혈**|전립선 주변의 혈관에서 발생 가능<br>상태에 따라 수혈이나 재수술이 필요할 수 있음<br>드물게 수술 후 출혈이 발생(약 0.5%)<br>이 경우 <span style="color: #007bff;">**빈혈이나 심한 경우 쇼크**</span>가 생길 수 있습니다.<br>혈전증, 폐색전증, 심부정맥혈전증|
        |**폐 합병증**|전신마취 후 <span style="color: #007bff;">**폐렴이나 무기폐(폐가 잘 펴지지 않는 상태)**</span> 발생 가능|
        |**주변 장기 손상**|수술 중 장기가 손상 가능<br>경미하면 바로 봉합이 가능하지만, 심하면 장루(대변을 배 밖으로 빼내는 주머니)가 필요할 수 있습니다.<br>이 경우 식사 제한 기간이 길어질 수 있음|
        |**주요 혈관·신경 손상**|골반 임파선 절제술 시 주요 혈관이나 신경이 손상 가능<br>손상되면 봉합이나 신경 연결 수술이 필요할 수 있으며, **허벅지 안쪽 감각이 없어지거나 근력이 약해져 걷기가 불편할 수 있음**|
        |**안압 상승**|머리를 아래로 둔 자세로 **뇌압과 안압 상승**<br>녹내장이 있으면 미리 알려주세요|
        |**임파액증**|수술 부위에서 임파액이 흘러나오는 경우가 있음<br>대부분 저절로 좋아지지만, **다리가 붓거나 배액관을 오래 유지**해야 할 수 있습니다(1.0~3.0%).|
        |**장마비**|수술 뒤 장이 일시적으로 움직이지 않는 경우가 있음<br>배가 더부룩하거나 구토, 통증<br>걷는 운동을 하면 회복되며, 필요에 따라 금식이나 위관 삽입이 필요할 수 있음|
        |**요관 손상**|아주 드물지만, 요관이 다치면 요관과 방광을 다시 연결하는 수술 필요|
        |**소변 유출**|전립선 제거 후 방광과 요도 연결 부위에서 소변이 샐 수 있음<br>대부분 시간이 지나면서 회복되지만, 필요하면 추가 처치가 필요할 수 있음|
        |**요로 감염·상처 감염**|출혈이나 소변 유출이 있거나 비만 환자에게 감염이 잘 생길 수 있음<br>심하면 절개 부위를 다시 봉합해야 할 수도 있음|
        |**혈뇨**|소변에 피가 보이는 혈뇨가 생길 수 있음<br>대부분 저절로 좋아지지만, 피덩어리로 소변줄이 막히면 처치 필요|
        |**발기부전**|약 10명 중 5-9명의 환자가 발기부전 발생<br>나이, 수술 전 발기력, 신경 보존 여부 등에 따라 회복 정도가 다르며, 회복은 보통 1-2년에 걸쳐 서서히 이루어집니다.<br>필요 시 발기부전 치료제를 사용할 수 있습니다.|
        |**요실금**|약 5-50%의 환자에서 요실금 발생<br>대부분 3개월-1년 사이에 호전되지만, 일부는 장기간 지속되어 기저귀나 추가 수술(인공괄약근 삽입술) 필요|
        |**배뇨 장애**|갑자기 소변이 자주 마렵거나 참기 힘든 증상이 생길 수 있으며, 약물 치료로 조절|
        |**방광 경부 협착**|방광과 요도를 연결한 부위가 좁아져 **소변줄기가 약해지거나 잦은 배뇨, 요실금** 발생 가능(약 1-17%).<br>심하면 시술이나 내시경 수술이 필요|
        |**요도-직장 누공**|매우 드물게 방광·요도 연결 부위에서 직장으로 구멍이 생길 수 있으며, 대부분 수술적 치료가 필요|
        |**사망**|매우 드물지만 수술 후 사망 위험(0-1.5%)|
        <!-- TTS-SKIP-END -->

        """
    },
    "관리 방법": {
        "로봇보조 자궁절제술": """

        |**관리방법**|**내용**|
        |---|---|
        |**심호흡**|수술 직후 <span style="color: #007bff;">**숨을 크게 쉬면**</span> 폐렴 예방에 도움이 됩니다.|
        |**걷기 운동**|<span style="color: #007bff;">**가능한 한 빨리, 자주 걸어야**</span> 장이 정상적으로 움직여 장 마비를 막을 수 있습니다.|
        |**식사**|소화가 잘되는 음식을 조금씩 자주 드시고, 물과 채소를 충분히 섭취하세요.|
        |**휴식**|수술 후 6주 동안은 무리한 활동이나 운동을 피하고 푹 쉬세요.|
        |**씻기**|가벼운 샤워는 실밥을 뽑은 후에 가능합니다. 그전에는 수건으로 몸을 닦아주세요.<br>탕 목욕은 4-6주, 부부관계는 6-8주 후부터 가능합니다.|
        |**질 분비물**|수술 후 3~4주간 피나 고름이 섞인 분비물이 나올 수 있습니다. <mark>출혈이 너무 많거나, 맑은 물이 계속 흐르거나, 냄새나 통증이 심하면</mark> 병원을 방문하세요.|
        |<mark>**이럴 땐 꼭 병원으로 오세요!**</mark>|수술 상처가 붓고, 빨개지거나, 진물이 나고, 통증이 심해질 때<br>38도 이상의 열이 날 때<br>빨갛고 선명한 피가 질에서 계속 나올 때<br>배의 통증이 퇴원할 때보다 더 심해질 때|
        |**자궁경부암 검사**|자궁을 모두 제거했더라도, 질이나 외음부에 암이 생길 수 있으니 정기적인 암 검진을 받는 것이 좋습니다.|

        """,
        "로봇보조 전립선절제술": """

        **[수술 후 관리방법]**

        |**관리방법**|**내용**|
        |---|---|
        |**호흡 운동**|수술 직후 <span style="color: #007bff;">**숨을 크게 들이마시고 내쉬는**</span> 연습을 하세요.|
        |**조기 보행**|수술 후 <span style="color: #007bff;">**가능한 한 빨리, 많이 걸어야**</span> 장 마비를 예방할 수 있습니다.|
        |**식사 관리**|수술 후 소화가 잘 안 되고 더부룩함, 변비나 설사, 배 부품 등이 생기기 쉽습니다.<br>**충분한 물 마시기**<br>**섬유질이 풍부하고 소화 잘 되는 음식**을 조금씩 자주 드세요|
        |**활동 제한**|수술 후 약 6주간<br>- **골반에 압력을 많이 주는 활동이나 운동은 피하세요**<br>- 충분한 휴식으로 몸을 회복시킨 후 일상생활로 복귀하세요|
        |**개인위생**|- 가벼운 샤워: 수술 부위 실밥 제거 후 가능<br>- 그 전까지: 물수건으로 수술 상처를 피해서 몸을 닦으세요<br>- **통목욕: 4-6주 동안 금지**<br>- **부부관계: 약 6-8주 후부터 가능**|
        |**요실금 회복**|빠른 회복을 위해 **케겔운동, 자기장 치료** 등이 도움이 됩니다.|

                """
    },
}

# 사이드바 섹션 매핑
SECTIONS_SIDEBAR_MAP = {
    "necessity": {"title": "왜 수술을 해야 하나요?", "idx": 1},
    "method": {"title": "수술은 어떻게 진행되나요?", "idx": 2},
    "considerations": {"title": "알아두어야 할 점", "idx": 3},
    "side_effects": {"title": "합병증", "idx": 4},
    "precautions": {"title": "관리 방법", "idx": 5},
}




